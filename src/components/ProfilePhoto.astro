---
import placeholder1 from '../assets/blog-placeholder-1.jpg';
import placeholder2 from '../assets/blog-placeholder-2.jpg';
import placeholder3 from '../assets/blog-placeholder-3.jpg';

const carouselItems = [
  { src: placeholder1.src, caption: "At zoo with the guys" },
  { src: placeholder2.src, caption: "Working on LangChain" },
  { src: placeholder3.src, caption: "Mechanical keyboard setup" },
];
---
<section class="flex flex-col gap-6 mb-8">
  <div id="carousel-container" class="relative w-full aspect-[16/5] bg-zinc-800 overflow-hidden">
    <div id="carousel-track" class="flex h-full transition-transform duration-500 ease-in-out">
      {carouselItems.map((item) => (
        <img 
          src={item.src} 
          alt={item.caption}
          class="w-full h-full object-cover flex-shrink-0"
        />
      ))}
    </div>
  </div>
  
  <div class="flex justify-between items-center text-sm text-zinc-500 italic">
    <span id="carousel-caption">{carouselItems[0].caption}</span>
    <div class="flex gap-4 not-italic">
      <button id="prev-btn" class="hover:text-zinc-300 transition-colors cursor-pointer">prev</button>
      <button id="next-btn" class="hover:text-zinc-300 transition-colors cursor-pointer">next</button>
    </div>
  </div>
</section>

<script is:inline define:vars={{ carouselItems }}>
  let currentIndex = 0;
  const trackEl = document.getElementById('carousel-track');
  const captionEl = document.getElementById('carousel-caption');
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');

  function updateCarousel(index) {
    currentIndex = (index + carouselItems.length) % carouselItems.length;
    const item = carouselItems[currentIndex];
    
    if (trackEl) {
      trackEl.style.transform = `translateX(-${currentIndex * 100}%)`;
    }
    
    if (captionEl) {
      captionEl.textContent = item.caption;
    }
  }

  prevBtn?.addEventListener('click', () => updateCarousel(currentIndex - 1));
  nextBtn?.addEventListener('click', () => updateCarousel(currentIndex + 1));
</script>
